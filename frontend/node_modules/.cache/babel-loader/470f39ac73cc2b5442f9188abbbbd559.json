{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/dev/mesto-react/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Footer } from './Footer';\nimport { Header } from './Header';\nimport { Main } from './Main';\nimport { EditProfilePopup } from './EditProfilePopup';\nimport { AddPlacePopup } from './AddPlacePopup';\nimport { EditAvatarPopup } from './EditAvatarPopup';\nimport { ImagePopup } from './ImagePopup';\nimport { api } from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  // попапы\n  const [isEditProfilePopupOpen, setEditProfileState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlaceState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null); //const [isConfirmPopupOpen, setConfirmPopupState] = useState(false);\n  // пользователь и карточки\n\n  const [currentUser, setCurrentUserState] = useState({});\n  const [cards, setCardsState] = useState([]); // открытие и закрытие попапов\n\n  function handleEditProfileClick() {\n    setEditProfileState(true);\n  }\n\n  ;\n\n  function handleAddPlaceClick() {\n    setAddPlaceState(true);\n  }\n\n  ;\n\n  function handleEditAvatarClick() {\n    setEditAvatarState(true);\n  }\n\n  ;\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  ; // function handleDeleteClick() {\n  //   setConfirmPopupState(true);\n  // };\n\n  function closeAllPopups() {\n    setEditProfileState(false);\n    setAddPlaceState(false);\n    setEditAvatarState(false);\n    setSelectedCard(null); //setConfirmPopupState(false);\n  }\n\n  ;\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()]).then(([userData, cardData]) => {\n      setCurrentUserState(userData);\n      setCardsState(cardData);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []); // пользователь\n\n  function handleUpdateUser(data) {\n    api.pushUserInfo(data).then(result => {\n      setCurrentUserState(result);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  ;\n\n  function handleUpdateAvatar(data) {\n    api.updateAvatar(data).then(result => {\n      setCurrentUserState(result);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  ; // карточки\n\n  function handleAddPlaceSubmit(data) {\n    api.pushNewCard(data).then(newCard => {\n      setCardsState([newCard, ...cards]);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  ;\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.setLikeCard(card._id, isLiked).then(newCard => {\n      setCardsState(state => state.map(c => c._id === card._id ? newCard : c));\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  ;\n\n  function handleCardDelete(card) {\n    api.removeCard(card._id).then(() => {\n      setCardsState(cards.filter(item => item._id !== card._id));\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfile: handleEditProfileClick,\n        onAddPlace: handleAddPlaceClick,\n        onEditAvatar: handleEditAvatarClick,\n        cards: cards,\n        onCardClick: handleCardClick,\n        onCardLike: handleCardLike // onDeleteClick = {handleDeleteClick}\n        ,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUpdateUser: handleUpdateUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddPlace: handleAddPlaceSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onUpdateAvatar: handleUpdateAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: !!selectedCard && selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"ByiwbB2tpzkNeERGfrTjlyF/SoY=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/mac/Documents/dev/mesto-react/src/components/App.js"],"names":["useState","useEffect","Footer","Header","Main","EditProfilePopup","AddPlacePopup","EditAvatarPopup","ImagePopup","api","CurrentUserContext","App","isEditProfilePopupOpen","setEditProfileState","isAddPlacePopupOpen","setAddPlaceState","isEditAvatarPopupOpen","setEditAvatarState","selectedCard","setSelectedCard","currentUser","setCurrentUserState","cards","setCardsState","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","card","closeAllPopups","Promise","all","getUserInfo","getInitialCards","then","userData","cardData","catch","err","console","log","handleUpdateUser","data","pushUserInfo","result","handleUpdateAvatar","updateAvatar","handleAddPlaceSubmit","pushNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","setLikeCard","state","map","c","handleCardDelete","removeCard","filter","item"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { Footer } from './Footer';\nimport { Header } from './Header';\nimport { Main } from './Main';\nimport { EditProfilePopup } from './EditProfilePopup';\nimport { AddPlacePopup } from './AddPlacePopup';\nimport { EditAvatarPopup } from './EditAvatarPopup';\nimport { ImagePopup } from './ImagePopup';\n\nimport { api } from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n  // попапы\n  const [isEditProfilePopupOpen, setEditProfileState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlaceState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  //const [isConfirmPopupOpen, setConfirmPopupState] = useState(false);\n\n  // пользователь и карточки\n  const [currentUser, setCurrentUserState] = useState({});\n  const [cards, setCardsState] = useState([]);\n\n  // открытие и закрытие попапов\n  function handleEditProfileClick() {\n    setEditProfileState(true);\n  };\n  function handleAddPlaceClick() {\n    setAddPlaceState(true);\n  };\n  function handleEditAvatarClick() {\n    setEditAvatarState(true);\n  };\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  };\n // function handleDeleteClick() {\n //   setConfirmPopupState(true);\n // };\n\n  function closeAllPopups() {\n    setEditProfileState(false);\n    setAddPlaceState(false);\n    setEditAvatarState(false);\n    setSelectedCard(null);\n    //setConfirmPopupState(false);\n  };\n  \n  \n\n  useEffect(() => {\n    Promise.all([\n      api.getUserInfo(),\n      api.getInitialCards(),\n    ])\n    .then(([userData, cardData]) => {\n      setCurrentUserState(userData);\n      setCardsState(cardData);\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }, []);\n\n  // пользователь\n  function handleUpdateUser (data) {\n    api.pushUserInfo(data)\n    .then((result) => {\n      setCurrentUserState(result);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n\n  function handleUpdateAvatar(data) {\n    api.updateAvatar(data)\n    .then((result) => {\n      setCurrentUserState(result);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n\n  // карточки\n  function handleAddPlaceSubmit(data) {\n    api.pushNewCard(data)\n    .then((newCard) => {\n      setCardsState([newCard, ...cards]);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.setLikeCard(card._id, isLiked)\n    .then((newCard) => {\n      setCardsState((state) => state.map((c) => c._id === card._id ? newCard : c));\n    })\n    .catch((err) => {\n      console.log(err)\n    });\n  };\n\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n    .then(() => {\n      setCardsState(cards.filter(item => item._id !== card._id));\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(err)\n    });\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n    <div className=\"page\">\n      <Header />\n\n      <Main \n      onEditProfile = {handleEditProfileClick} \n      onAddPlace = {handleAddPlaceClick}\n      onEditAvatar = {handleEditAvatarClick}\n      cards = {cards}\n      onCardClick = {handleCardClick}\n      onCardLike = {handleCardLike}\n     // onDeleteClick = {handleDeleteClick}\n      onCardDelete = {handleCardDelete}\n      />\n\n      <Footer />\n\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n      <ImagePopup card={!!selectedCard && selectedCard} onClose={closeAllPopups} />\n      \n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}